#* *************************************************************************
#*                        bash scripts for compile latex
#* *************************************************************************
#! /bin/bash
#* *************************************************************************
#*                        pre information
#* *************************************************************************
if [ "$#" != "2" ];then
    echo "Usage: "$0" Compiler(\"x\" or \"p\") File_Name"
	echo "if compile failed, use \"quit\" to terminate the terminal..."
	exit
fi
#* *************************************************************************
#*                      get the file name to compile
#* *************************************************************************
File_Name="$2"
File_Name=${File_Name/.tex}
#* *************************************************************************
#*                        get the compiler
#* *************************************************************************
if [[ $1 == 'p' ]];then
    CompileName="pdflatex"
elif [[ $1 == 'x' ]];then
    CompileName="xelatex"
else
    echo "*************************************************************************"
    echo "wrong option"
    echo "*************************************************************************"
fi
#* *************************************************************************
#*                        temperary directory
#* *************************************************************************
#* set the temp directory name
Tmp="Tmp"
if [[ ! -d $Tmp ]];then
mkdir -p $Tmp
fi
#* *************************************************************************
#*                include subdirs to compile path
#* *************************************************************************
export TEXINPUTS=".//:$TEXINPUTS"
export BIBINPUTS=".//:$BIBINPUTS"
export BSTINPUTS=".//:$BSTINPUTS"
#* *************************************************************************
#*                compile target file
#* *************************************************************************
$CompileName -output-directory=$Tmp $File_Name
#* *************************************************************************
#*               if use bibtex, need following commands 
#* *************************************************************************
bibtex ./$Tmp/$File_Name
$CompileName -output-directory=$Tmp $File_Name
$CompileName -output-directory=$Tmp $File_Name
#* *************************************************************************
#*                open the generated pdf file
#* *************************************************************************
gnome-open ./$Tmp/"$File_Name".pdf
echo "*************************************************************************"
echo "use $CompileName Compile "$File_Name".tex finished!"
echo "*************************************************************************"
